// angular-paginate-anything - v4.0.1
!function(){"use strict";function a(a){var b=[1,2.5,5];return Math.floor(Math.pow(10,Math.floor(a/3))*b[a%3])}function b(a){if(1>a)return 0;var b=Math.floor(Math.log(a)/Math.LN10),c=a/(2.5*Math.pow(10,b));return c>=3&&(b++,c=0),3*b+Math.round(Math.min(2,c))}function c(c){return 1/0===c?1/0:a(b(c))}function d(a){var b=a&&a.match(/^(\d+)-(\d+)\/(\d+|\*)$/);return b?{from:+b[1],to:+b[2],total:"*"===b[3]?1/0:+b[3]}:"*/0"===a?{total:0}:null}function e(a){return a.to-a.from+1}angular.module("bgf.paginateAnything",[]).directive("bgfPagination",function(){var f=3,g=250,h=50;return{restrict:"AE",scope:{url:"=",collection:"=",urlParams:"=?",headers:"=?",page:"=?",perPage:"=?",perPagePresets:"=?",autoPresets:"=?",clientLimit:"=?",linkGroupSize:"=?",reloadPage:"=?",size:"=?",passive:"@",numPages:"=?",numItems:"=?",serverLimit:"=?",rangeFrom:"=?",rangeTo:"=?"},templateUrl:function(a,b){return b.templateUrl||"src/paginate-anything.html"},replace:!0,controller:["$scope","$http",function(i,j){function k(c){i.$emit("pagination:loadStart",c),j({method:"GET",url:i.url,params:i.urlParams,headers:angular.extend({},i.headers,{"Range-Unit":"items",Range:[c.from,c.to].join("-")})}).success(function(f,g,j,k){var l=d(j("Content-Range"));if(204===g||l&&0===l.total?(i.numItems=0,i.collection=[]):(i.numItems=l?l.total:f.length,i.collection=f||[]),l&&(i.rangeFrom=l.from,i.rangeTo=l.to,e(l)<l.total&&(c.to<l.total-1||l.to<l.total-1&&l.total<c.to)&&(!i.perPage||e(l)<i.perPage))){if(i.autoPresets){var m=b(e(l));a(m)>e(l)&&m--,i.serverLimit=a(m)}else i.serverLimit=e(l);i.perPage=i.Math.min(i.serverLimit,i.clientLimit)}i.numPages=Math.ceil(i.numItems/(i.perPage||h)),i.$emit("pagination:loadPage",g,k)}).error(function(a,b,c,d){i.$emit("pagination:error",b,d)})}i.reloadPage=!1,i.serverLimit=1/0,i.Math=window.Math,"boolean"!=typeof i.autoPresets&&(i.autoPresets=!0);var l=i.linkGroupSize,m=i.clientLimit;if(i.linkGroupSize="number"==typeof l?l:f,i.clientLimit="number"==typeof m?m:g,i.updatePresets=function(){if(i.autoPresets){var c,d=[];for(c=Math.min(3,b(i.perPage||h));c<=b(Math.min(i.clientLimit,i.serverLimit));c++)d.push(a(c));i.perPagePresets=d}else i.perPagePresets=i.perPagePresets.filter(function(a){return a<=i.serverLimit}).concat([i.serverLimit])},i.gotoPage=function(a){i.page=a},i.linkGroupFirst=function(){var a=Math.max(0,i.linkGroupSize-(i.numPages-1-(i.page+2)));return Math.max(0,i.page-(i.linkGroupSize+a))},i.linkGroupLast=function(){var a=Math.max(0,i.linkGroupSize-(i.page-2));return Math.min(i.numPages-1,i.page+(i.linkGroupSize+a))},i.isFinite=function(){return i.numPages<1/0},i.page=i.page||0,i.size=i.size||"md",i.autoPresets&&i.updatePresets(),i.$watch("page",function(a,b){if("true"!==i.passive&&a!==b){if(0>a||a*i.perPage>=i.numItems)return;var d=i.perPage||h;i.autoPresets&&(d=c(d)),k({from:a*d,to:(a+1)*d-1})}}),i.$watch("perPage",function(a,b){if("true"!==i.passive&&"number"==typeof b&&a!==b){var c=i.page*b,d=Math.floor(c/a);i.page!==d?i.page=d:k({from:i.page*a,to:(i.page+1)*a-1})}}),i.$watch("serverLimit",function(a,b){"true"!==i.passive&&a!==b&&i.updatePresets()}),i.$watch("url",function(a,b){"true"!==i.passive&&a!==b&&(0===i.page?i.reloadPage=!0:i.page=0)}),i.$watch("urlParams",function(a,b){"true"!==i.passive&&(angular.equals(a,b)||(0===i.page?i.reloadPage=!0:i.page=0))},!0),i.$watch("headers",function(a,b){"true"!==i.passive&&(angular.equals(a,b)||(0===i.page?i.reloadPage=!0:i.page=0))},!0),i.$watch("reloadPage",function(a,b){"true"!==i.passive&&a===!0&&b===!1&&(i.reloadPage=!1,k({from:i.page*i.perPage,to:(i.page+1)*i.perPage-1}))}),"true"!==i.passive){var n=i.perPage||h;i.autoPresets&&(n=c(n)),k({from:i.page*n,to:(i.page+1)*n-1})}}]}}).filter("makeRange",function(){return function(a){var b,c;switch(a.length){case 1:b=0,c=parseInt(a[0],10)-1;break;case 2:b=parseInt(a[0],10),c=parseInt(a[1],10);break;default:return a}for(var d=[],e=b;c>=e;e++)d.push(e);return d}})}(),angular.module("bgf.paginateAnything").run(["$templateCache",function(a){"use strict";a.put("src/paginate-anything.html",'<div class=paginate-anything><ul class="pagination pagination-{{size}} links" ng-if="numPages > 1"><li ng-class="{disabled: page <= 0}"><a href ng-click=gotoPage(page-1)>&laquo;</a></li><li ng-if="linkGroupFirst() > 0"><a href ng-click=gotoPage(0)>1</a></li><li ng-if="linkGroupFirst() > 1" class=disabled><a href>&hellip;</a></li><li ng-repeat="p in [linkGroupFirst(), linkGroupLast()] | makeRange" ng-class="{active: p === page}"><a href ng-click=gotoPage(p)>{{p+1}}</a></li><li ng-if="linkGroupLast() < numPages - 2" class=disabled><a href>&hellip;</a></li><li ng-if="isFinite() && linkGroupLast() < numPages - 1"><a href ng-click=gotoPage(numPages-1)>{{numPages}}</a></li><li ng-class="{disabled: page >= numPages - 1}"><a href ng-click=gotoPage(page+1)>&raquo;</a></li></ul><div class=per-page ng-if="perPagePresets.length > 0 && numPages > 1"><select ng-model=$parent.perPage ng-options="p for p in perPagePresets"></select>per page</div></div>')}]);